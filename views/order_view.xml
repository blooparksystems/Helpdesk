<?xml version="1.0"?>
<openerp>
	<data>
		<!-- ORDER VIEW TO LIST EMPLOYEE AND MANAGER ORDERS -->
		<record model="ir.ui.view" id="my_order_tree_view">
			<field name="name">order.tree</field>
			<field name="model">helpdesk.order</field>
			<field anme="arch" type="xml">
				<tree string="My Orders">
					<field name="name" domain="['&',('partner_id','=',user.partner_id.id), ('company_id','=',user.partner_id.company_id.id)]"/>
					<field name="state" domain="['&',('partner_id','=',user.partner_id.id), ('company_id','=',user.partner_id.company_id.id)]"/>
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window.view" id="action_my_order_tree_view">
			<field name="sequence" eval="1"/>
			<field name="view_mode">tree</field>
			<field name="view_id" ref="my_order_tree_view"/>
			<field name="act_window_id" ref="action_my_order_tree_view"/>
		</record> 

		<!-- ORDER VIEW TO LIST ALL ORDERS FROM A SPECIFIC COMPANY -->
		<record model="ir.ui.view" id="company_order_tree_view">
			<field name="name">order.tree</field>
			<field name="model">helpdesk.order</field>
			<field anme="arch" type="xml">
				<tree string="Orders">
					<field name="name" domain="[('company_id','=',user.partner_id.company_id.id)]"/>
					<field name="state" domain="[('company_id','=',user.partner_id.company_id.id)]"/>
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window.view" id="action_company_order_tree_view">
			<field name="sequence" eval="1"/>
			<field name="view_mode">tree</field>
			<field name="view_id" ref="company_order_tree_view"/>
			<field name="act_window_id" ref="action_company_order_tree_view"/>
		</record> 

		<!-- ORDER VIEW TO LIST TRACKED ORDERS TO AGENT -->
		<record model="ir.ui.view" id="tracked_order_tree_view">
			<field name="name">order.tree</field>
			<field name="model">helpdesk.track_follow</field>
			<field name="arch" typ="xml">
				<tree string="Tracked Orders">
					<field name="name" domain="[('user_id','=',user.id)]"/>
					<field name="state" domain="[('user_id','=',user.id)]"/>
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window.view" id="action_tracked_order_tree_view">
			<field name="sequence" eval="1"/>
			<field name="view_mode">tree</field>
			<field name="view_id" ref="tracked_order_tree_view"/>
			<field name="act_window_id" ref="action_tracked_order_tree_view"/>
		</record> 

		<!-- ORDER VIEW TO LIST OPEN ORDERS TO AGENT -->
		<record model="ir.ui.view" id="open_order_tree_view">
			<field name="name">order.tree</field>
			<field name="model">helpdesk.order</field>
			<field name="arch" typ="xml">
				<tree string="Open Orders">
					<field name="name" domain="[('state','=','open')]"/>
					<field name="state" domain="[('state','=','open')]"/>
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window.view" id="action_open_order_tree_view">
			<field name="sequence" eval="1"/>
			<field name="view_mode">tree</field>
			<field name="view_id" ref="open_order_tree_view"/>
			<field name="act_window_id" ref="action_open_order_tree_view"/>
		</record> 

		<!-- ORDER VIEW TO LIST ALL ORDERS -->
		<record model="ir.ui.view" id="orders_tree_view">
			<field name="name">order.tree</field>
			<field name="model">helpdesk.order</field>
			<field name="arch" typ="xml">
				<tree string="Orders">
					<field name="name"/>
					<field name="state"/>
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window.view" id="action_orders_tree_view">
			<field name="sequence" eval="1"/>
			<field name="view_mode">tree</field>
			<field name="view_id" ref="orders_tree_view"/>
			<field name="act_window_id" ref="action_orders_tree_view"/>
		</record> 

		<!-- ANSWER ORDER FORM VIEW -->
		<record model="ir.ui.view" id="order_form_view">
			<field name="name">order.form</field>
			<field name="model">helpdesk.answer</field>
			<field name="arch" type="xml">
				<form string="Order Form">
					<sheet>
						<group>
							<field name="name"/>
							<field name="description"/>
							<field name="message"/>
						</group>
					<sheet>
				</form>
			</field>
		</record>

	<!--
		<record model="ir.actions.act_window" id="action_order_form_view">
			<field name="name">Order</field>
			<field name="res_model">helpdesk.order</field>
			<field name="view_type">form</field>
			<field name="view_mode">form</field>
		</record>
	-->

	<!-- MENU -->
	<!-- top level menu: no parent -->
	<menuitem id="main_helpdesk_menu" name="HelpDesk"/>

	<!-- A first level in the left side menu is needed before using action= attribute -->
	<menuitem id="helpdesk_menu" name="HelpDesk" parent="main_helpdesk_menu"/>

	<!-- Submenu -->
	<menuitem id="my_order_menu" name="My Orders" groups="partner" parent="helpdesk_menu" action="action_my_order_tree_view"/>
	<menuitem id="company_order_menu" name="Company Orders" groups="company_manager" parent="helpdesk_menu" action="action_company_order_tree_view"/>
	<menuitem id="tracked_order_menu" name="Tracked Orders" groups="agents" parent="helpdesk_menu" action="action_tracked_order_tree_view"/>
	<menuitem id="open_order_menu" name="Open Orders" groups="agents" parent="helpdesk_menu" action="action_open_order_tree_view"/>
	<menuitem id="orders_menu" name="Orders" groups="helpdesk_manager" parent="helpdesk_menu" action="action_orders_tree_view"/>

	</data>
</openerp>